<html>
  <head>
    <meta charset="UTF-8" />

<!--Global variables-->
    <script src="globals.js"></script>

    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
	<ul>
	  <li><a class="active" href="index.html">Back</a></li>
	  <li><a href="#about">About</a></li>
	</ul>
    <h1 class="title">SpaceHunt</h1>
	<br>
	<br>
	<h2>Configurations:</h2>
    <form name="UI">
      <p>
        Start Location: X
        <input type="text" id="xVal" name="xValue" size="4" /> Y
        <input type="text" id="yVal" name="yValue" size="4" />
      </p>
      <p>Energy <input type="text"  id="energy" name="energy" size="4" /></p>
      <p>Supplies <input type="text" id ="supplies" name="supplies" size="4" />%</p>
	  <p>Credits <input type="text" id ="credits" name="credits" size="4" /></p>
      <p>Play mode:
	    <input type="radio" name="mode" value="regular"> Regular play &nbsp;
	    <input type="radio" name="mode" value="test"> Never dies
	  </p>
	  <p>Wormhole behavior:
	    <input type="radio" name="wormhole" value="fixed"> Fixed &nbsp;
	    <input type="radio" name="wormhole" value="random"> Random
	  </p>
	  <p>
        Game size: Width
        <input type="text" id="xVal" name="xValue" size="4" /> Height
        <input type="text" id="yVal" name="yValue" size="4" />
      </p>
	  <input
          type="button"
          value="Cancel"
          onclick="reset()"
      />
	  <input
          type="button"
          value="Save"
          onclick="save()"
      />
      
    </form>

	<script>
	function save() {
	  //var requestURL = "settings.json";
	//  var request = new XMLHttpRequest();
	//  request.open("GET", requestURL);
	//  request.responseType = "json";
	//  request.send();
	//  var setting = request.response;
	//  var fs = require("fs");
	//  var fileName = "./settings.json";
	//  var file = require(fileName);
	//  setting["locationX"] = document.getElementById("xVal").value;
	//  setting["locationY"] = document.getElementById("yVal").value;
	//  file.energy = document.getElementById("energy").value;
	//  file.supplies = document.getElementById("supplies").value;
	//  fs.writeFile(fileName, JSON.stringify(setting), function (err) {
	//  if (err) return console.log(err);
	//	console.log(JSON.stringify(setting));
	//	console.log("writing to " + fileName);
	  //});
	  fs.readFile('settings.json', 'utf8', function readFileCallback(err, data){
      if (err){
        console.log(err);
      } else {
      obj = JSON.parse(data); //now it an object
      obj.locationX = document.getElementById("xVal").value; //add some data
	  obj.locationY = document.getElementById("yVal").value;
      json = JSON.stringify(obj); //convert it back to json
      fs.writeFile('settings.json', json, 'utf8', callback); // write it back 
	  }});
	}
	</script>
	
  </body>
</html>
